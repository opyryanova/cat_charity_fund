# QRKot — благотворительный фонд помощи котикам

## Описание проекта
**QRKot** — приложение для управления благотворительными проектами и
пожертвованиями.  
Фонд собирает средства на конкретные цели (лечение, корм, приюты), а
пользователи могут делать пожертвования.  
Система автоматически распределяет поступившие деньги в самые ранние открытые
проекты, пока они не наберут нужную сумму.

---

## Основные возможности
- создание целевых проектов с описанием и требуемой суммой сбора;
- создание пожертвований и автоматическое распределение средств;
- закрытие проекта при достижении полной суммы;
- просмотр списка всех проектов и статуса их финансирования;
- доступ к документации API (Swagger и ReDoc);
- управление пользователями и аутентификация через JWT-токены.

---

## Технологии
- **Python 3.10+**
- **FastAPI**
- **SQLAlchemy 2.0 (Async)**
- **Alembic**
- **Pydantic v2**
- **SQLite + aiosqlite**
- **Uvicorn**
- **pytest**

---

## Запуск проекта локально

1. **Клонировать репозиторий**
   ```bash
   git clone <your-repo-url>
   cd cat_charity_fund
   ```

2. **Создать и активировать виртуальное окружение**
   ```bash
   python -m venv venv
   source venv/bin/activate      # macOS / Linux
   venv\Scripts\activate         # Windows
   ```

3. **Установить зависимости**
   ```bash
   pip install -r requirements.txt
   ```

4. **Применить миграции Alembic**
   ```bash
   alembic upgrade head
   ```

5. **Запустить сервер**
   ```bash
   uvicorn app.main:app --reload
   ```

6. **Открыть документацию API**
   - Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)  
   - ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

---

## Основные эндпоинты

|   Метод  | URL                     | Назначение                                  |
| :------: | :---------------------- | :------------------------------------------ |
|  `POST`  | `/auth/register`        | Регистрация пользователя                    |
|  `POST`  | `/auth/jwt/login`       | Аутентификация (JWT)                        |
|   `GET`  | `/charity_project/`     | Список проектов                             |
|  `POST`  | `/charity_project/`     | Создание проекта *(только для суперюзеров)* |
|  `PATCH` | `/charity_project/{id}` | Изменение проекта                           |
| `DELETE` | `/charity_project/{id}` | Удаление проекта                            |
|  `POST`  | `/donation/`            | Создание пожертвования                      |
|   `GET`  | `/donation/`            | Все пожертвования *(только суперюзеры)*     |
|   `GET`  | `/donation/my`          | Пожертвования текущего пользователя         |

---

## Тестирование
Для проверки корректности работы приложения:
```bash
pytest -v
```

---

## Автор
[Ольга Пырьянова](https://github.com/opyryanova)
